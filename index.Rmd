---
title: "My Portfolio"
author: "Anne Leendertse"
date: "Spring 2023"
output:
  flexdashboard::flex_dashboard:
    storyboard: true
---

```{r}
library(tidyverse)
library(spotifyr)
library(plotly)
library(compmus)
library(tidyr)

```

```{r}
andy_shauf <- get_track_audio_features("15WJWyrI3c6aRuvbYgMcKv")
my_portfolio <- get_playlist_audio_features("", "3MxAsxThsrUCjU4QAplkg0")
my_portfolio2 <- get_playlist_audio_features("", "0nYReIA8L6ep3yZp00TLwf")
Home <- get_track_audio_features("2YonDH4haZzgbo3NjpIalE")

Home_num <- Home %>% select_if(is.numeric) %>% select(-time_signature, -key)
andy_shauf_num <- andy_shauf %>% select_if(is.numeric)

my_portfolio2_num <- my_portfolio2 %>% select_if(is.numeric)
my_portfolio2_clean <- my_portfolio2_num %>% select(-track.disc_number, -track.disc_number, -track.popularity, -track.track_number, -track.album.total_tracks, -time_signature, -key)

my_portfolio_clean_mean <- apply(my_portfolio2_clean, 2, mean) 

compare_influence_writing <- rbind(my_portfolio_clean_mean, Home_num)

compare_influence_writing <- t(compare_influence_writing )
```

### This is the first tab

I put italics between stars *like this*. I put bold between two stars **like this**. I make lists like this:

-   list 1
-   list 2
-   list 3



```{r}
compare_influence_writing
```

***
So as you can see I cleaned up the data. In the left column you can see that I got the mean of every single numerical variable of my most listend songs. In the right column you see all the numerical values given by Spotify to my song. I can't figure out what the best way is to compare these two. What graph should I use?

### This is the second tab

```{r}

```

### This is the third tab

#### testje0

Oke nou wat tekst om ff te checken wtf er gebeurt

#### testje1:

```{r}
Home <-
  get_tidy_audio_analysis("2YonDH4haZzgbo3NjpIalE") |>
  select(segments) |>
  unnest(segments) |>
  select(start, duration, pitches)

Home |>
  mutate(pitches = map(pitches, compmus_normalise, "euclidean")) |>
  compmus_gather_chroma() |> 
  ggplot(
    aes(
      x = start + duration / 2,
      width = duration,
      y = pitch_class,
      fill = value
    )
  ) +
  geom_tile() +
  labs(x = "Time (s)", y = NULL, fill = "Magnitude") +
  theme_minimal() +
  scale_fill_viridis_c()
```
